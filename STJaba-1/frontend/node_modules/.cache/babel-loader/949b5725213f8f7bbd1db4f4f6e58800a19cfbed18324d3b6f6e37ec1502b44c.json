{"ast":null,"code":"var _jsxFileName = \"/Users/abdullahzayed/STJaba-1/frontend2/src/components/MapDisplay.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\n\n// MapDisplay shows the map image and overlays incidents (red) and vehicles (blue).\n// Coordinates passed in incidents/vehicles are expected to be normalized [0-1].\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MapDisplay({\n  incidents = [],\n  vehicles = [],\n  onMapClick\n}) {\n  _s();\n  const imgRef = useRef(null);\n  const svgRef = useRef(null);\n  const [size, setSize] = useState({\n    w: 600,\n    h: 600\n  });\n  useEffect(() => {\n    const img = imgRef.current;\n    if (!img) return;\n    const update = () => setSize({\n      w: img.clientWidth,\n      h: img.clientHeight\n    });\n    update();\n    window.addEventListener('resize', update);\n    return () => window.removeEventListener('resize', update);\n  }, []);\n  const handleClick = e => {\n    const img = imgRef.current;\n    if (!img) return;\n    const rect = img.getBoundingClientRect();\n    const x = (e.clientX - rect.left) / rect.width;\n    const y = (e.clientY - rect.top) / rect.height;\n    // normalized coords\n    onMapClick && onMapClick({\n      x: parseFloat(x.toFixed(4)),\n      y: parseFloat(y.toFixed(4))\n    });\n  };\n  const renderMarkers = () => {\n    const elems = [];\n    const r = 8;\n    incidents.forEach(inc => {\n      var _inc$location$x, _inc$location, _inc$location$y, _inc$location2;\n      const x = ((_inc$location$x = (_inc$location = inc.location) === null || _inc$location === void 0 ? void 0 : _inc$location.x) !== null && _inc$location$x !== void 0 ? _inc$location$x : 0) * size.w;\n      const y = ((_inc$location$y = (_inc$location2 = inc.location) === null || _inc$location2 === void 0 ? void 0 : _inc$location2.y) !== null && _inc$location$y !== void 0 ? _inc$location$y : 0) * size.h;\n      elems.push(/*#__PURE__*/_jsxDEV(\"circle\", {\n        cx: x,\n        cy: y,\n        r: r,\n        fill: \"red\",\n        stroke: \"#900\",\n        strokeWidth: 1\n      }, `inc-${inc.id}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this));\n    });\n    vehicles.forEach(veh => {\n      var _veh$location$x, _veh$location, _veh$location$y, _veh$location2;\n      const x = ((_veh$location$x = (_veh$location = veh.location) === null || _veh$location === void 0 ? void 0 : _veh$location.x) !== null && _veh$location$x !== void 0 ? _veh$location$x : 0) * size.w;\n      const y = ((_veh$location$y = (_veh$location2 = veh.location) === null || _veh$location2 === void 0 ? void 0 : _veh$location2.y) !== null && _veh$location$y !== void 0 ? _veh$location$y : 0) * size.h;\n      elems.push(/*#__PURE__*/_jsxDEV(\"circle\", {\n        cx: x,\n        cy: y,\n        r: r,\n        fill: \"blue\",\n        stroke: \"#003\",\n        strokeWidth: 1\n      }, `veh-${veh.id}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this));\n    });\n    return elems;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        paddingBottom: 6\n      },\n      className: \"coords-box\",\n      children: \"Click map to pick location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      ref: imgRef,\n      className: \"map-image\",\n      src: \"/map.png\",\n      alt: \"map\",\n      onClick: handleClick,\n      onLoad: e => setSize({\n        w: e.target.clientWidth,\n        h: e.target.clientHeight\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      className: \"overlay-svg\",\n      width: size.w,\n      height: size.h,\n      style: {\n        width: size.w,\n        height: size.h\n      },\n      children: renderMarkers()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(MapDisplay, \"4v/XwbtDXORSB/Cu/iMi59b40Fg=\");\n_c = MapDisplay;\nvar _c;\n$RefreshReg$(_c, \"MapDisplay\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","MapDisplay","incidents","vehicles","onMapClick","_s","imgRef","svgRef","size","setSize","w","h","img","current","update","clientWidth","clientHeight","window","addEventListener","removeEventListener","handleClick","e","rect","getBoundingClientRect","x","clientX","left","width","y","clientY","top","height","parseFloat","toFixed","renderMarkers","elems","r","forEach","inc","_inc$location$x","_inc$location","_inc$location$y","_inc$location2","location","push","cx","cy","fill","stroke","strokeWidth","id","fileName","_jsxFileName","lineNumber","columnNumber","veh","_veh$location$x","_veh$location","_veh$location$y","_veh$location2","className","children","style","textAlign","paddingBottom","ref","src","alt","onClick","onLoad","target","_c","$RefreshReg$"],"sources":["/Users/abdullahzayed/STJaba-1/frontend2/src/components/MapDisplay.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\n\n// MapDisplay shows the map image and overlays incidents (red) and vehicles (blue).\n// Coordinates passed in incidents/vehicles are expected to be normalized [0-1].\n\nexport default function MapDisplay({ incidents = [], vehicles = [], onMapClick }){\n  const imgRef = useRef(null)\n  const svgRef = useRef(null)\n  const [size, setSize] = useState({w: 600, h: 600})\n\n  useEffect(()=>{\n    const img = imgRef.current\n    if(!img) return\n    const update = ()=> setSize({w: img.clientWidth, h: img.clientHeight})\n    update()\n    window.addEventListener('resize', update)\n    return ()=> window.removeEventListener('resize', update)\n  },[])\n\n  const handleClick = (e) =>{\n    const img = imgRef.current\n    if(!img) return\n    const rect = img.getBoundingClientRect()\n    const x = (e.clientX - rect.left) / rect.width\n    const y = (e.clientY - rect.top) / rect.height\n    // normalized coords\n    onMapClick && onMapClick({ x: parseFloat(x.toFixed(4)), y: parseFloat(y.toFixed(4)) })\n  }\n\n  const renderMarkers = () => {\n    const elems = []\n    const r = 8\n    incidents.forEach((inc) => {\n      const x = (inc.location?.x ?? 0) * size.w\n      const y = (inc.location?.y ?? 0) * size.h\n      elems.push(\n        <circle key={`inc-${inc.id}`} cx={x} cy={y} r={r} fill=\"red\" stroke=\"#900\" strokeWidth={1} />\n      )\n    })\n    vehicles.forEach((veh) => {\n      const x = (veh.location?.x ?? 0) * size.w\n      const y = (veh.location?.y ?? 0) * size.h\n      elems.push(\n        <circle key={`veh-${veh.id}`} cx={x} cy={y} r={r} fill=\"blue\" stroke=\"#003\" strokeWidth={1} />\n      )\n    })\n    return elems\n  }\n\n  return (\n    <div className=\"map-container panel\">\n      <div style={{textAlign:'center', paddingBottom:6}} className=\"coords-box\">Click map to pick location</div>\n      <img\n        ref={imgRef}\n        className=\"map-image\"\n        src=\"/map.png\"\n        alt=\"map\"\n        onClick={handleClick}\n        onLoad={(e)=> setSize({w: e.target.clientWidth, h: e.target.clientHeight})}\n      />\n\n      <svg\n        ref={svgRef}\n        className=\"overlay-svg\"\n        width={size.w}\n        height={size.h}\n        style={{ width: size.w, height: size.h }}\n      >\n        {renderMarkers()}\n      </svg>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}